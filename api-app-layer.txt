var DiamondAPI;

DiamondAPI.validationDFS = (obj) => {
  if (obj.collection === null) return false;
  let x = true;
  if (obj.children) obj.children.forEach((child) => x = x && validationDFS(child));
  return x;
};

DiamondAPI.subscribe = (moduleInstanceId, obj, callback) => {
  // Validation.
  if (validationDFS(obj)) {
    // Subscribe to data
    Meteor.subscribe('moduleInstances.data', moduleInstanceId, obj, {
      onReady: callback,
      onError: (err) => {
        throw console.error('Error while subscribing.', err);
      },
    });
  } else throw console.error('The provided data is wrong.');
};

/*
(function() {
  let DiamondAPI = DiamondAPI || {};

  DiamondAPI.subscribe = () => {

  };

})();
*/
